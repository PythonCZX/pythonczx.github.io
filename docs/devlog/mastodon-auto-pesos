<!DOCTYPE html><html lang="en" data-theme="classic"><head><title>Mastodon Auto-PESOS</title><link rel="shortcut icon" href="/assets/img/favicon.ico"><link rel="alternate" type="application/rss+xml" title="All Content Feed" href="https://shellsharks.com/feeds/all-feed.xml"><link rel="alternate" type="application/rss+xml" title="Post Feed" href="https://shellsharks.com/feeds/feed.xml"><link rel="alternate" type="application/rss+xml" title="Scrolls Feed" href="https://shellsharks.com/feeds/scroll-feed.xml"><link rel="alternate" type="application/rss+xml" title="Infosec Feed" href="https://shellsharks.com/feeds/infosec-feed.xml"><link rel="alternate" type="application/rss+xml" title="Notes Feed" href="https://shellsharks.com/feeds/note-feed.xml"><link rel="alternate" type="application/rss+xml" title="Devlogs Feed" href="https://shellsharks.com/feeds/devlog-feed.xml"><link rel="alternate" type="application/rss+xml" title="Links Feed" href="https://shellsharks.com/feeds/link-feed.xml"><link rel="alternate" type="application/rss+xml" title="Captains Log Feed" href="https://shellsharks.com/feeds/log-feed.xml"><link rel="alternate" type="application/rss+xml" title="Social Web Feed" href="https://shellsharks.com/feeds/socialweb-feed.xml"><link rel="alternate" type="application/rss+xml" title="Life Feed" href="https://shellsharks.com/feeds/life-feed.xml"><link rel="blogroll" type="text/xml" href="https://shellsharks.com/assets/rsrc/shellsharks-blogroll.opml"><link type="text/plain" rel="author" href="https://shellsharks.com/humans.txt" /><link rel="canonical" href="https://shellsharks.com/devlog/mastodon-auto-pesos"><link rel="apple-touch-icon" href="/assets/img/apple-touch-icon.png"><link rel="indieweb" href="/indieweb.txt" /><link href="https://github.com/shellsharks" rel="me"> <!--IndieAuth Provider--><link rel="authorization_endpoint" href="https://indieauth.com/auth"> <!--IndieAuth--><link rel="token_endpoint" href="https://tokens.indieauth.com/token"> <!--IndieAuth token endpoint--> <!--needed for button css--><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous"><link href='/assets/css/style.css' rel='stylesheet' type='text/css'><link href="/assets/css/syntax.css" rel="stylesheet" ><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/regular/style.css" /><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/fill/style.css" /><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/bold/style.css" /><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="Michael Sass" /><meta name="description" content="How I'm auto-reverse-syndicating Mastodon posts to my static site." /><meta name="keywords" content="Mastodon Auto-PESOS, shellsharks, devlog, mastodon, fediverse" /><meta content="shellsharks" property="og:site_name" /><meta name="fediverse:creator" content="@shellsharks@shellsharks.social" /><meta name="robots" content="noai, noimageai, noml" /> <!--https://noml.info--> <script> const currentThemeX = localStorage.getItem('theme') ? localStorage.getItem('theme') : null; if (currentThemeX) { document.documentElement.setAttribute('data-theme', currentThemeX); } else if (matchMedia('(prefers-color-scheme: light)').matches) { localStorage.setItem('theme', "light"); } else if (matchMedia('(prefers-color-scheme: dark)').matches) { localStorage.setItem('theme', "classic"); } else { localStorage.setItem('theme', "classic"); } </script><meta content="Mastodon Auto-PESOS" property="og:title"><meta content="article" property="og:type"><meta content="How I'm auto-reverse-syndicating Mastodon posts to my static site." property="og:description"><meta content="https://shellsharks.com/devlog/mastodon-auto-pesos" property="og:url"><meta content="2025-03-11T11:32:00-04:00" property="article:published_time"><meta content="https://shellsharks.com/about/" property="article:author"><meta content="https://shellsharks-images.s3.amazonaws.com/surfshark.png" property="og:image"> <!--<meta content="https://shellsharks-images.s3.amazonaws.com/shellsharks.png" property="og:image">--><meta content="devlog" property="article:tag"><meta content="mastodon" property="article:tag"><meta content="fediverse" property="article:tag"> <script src="/assets/js/finrand.js"></script><style> @media (max-width: 2048px) { main { width:66%; } } @media (max-width: 1800px) { main { max-width:800px; width:95%; } } @media (max-width: 768px) { main { width:95%; } }</style><body><div class="container"><heading class="container_item"><style> /* * Made by Erik Terwan * 24th of November 2015 * MIT License * * * If you are thinking of using this in * production code, beware of the browser * prefixes. */ #menuToggle { display: block; position: relative; z-index: 1; -webkit-user-select: none; user-select: none; } #menuToggle a { text-decoration: none; transition: color 0.3s ease; color: var(--contrast-font-color); } .menu_section { color: var(--light-font-color); font-weight: 900; } .menu_section:nth-of-type(n+2) { margin-top:20px; } #menuToggle a:hover { color: var(--link-hover-color); } #menuToggle input { display: block; width: 40px; height: 32px; position: absolute; /*top: -7px;*/ /*left: -5px;*/ cursor: pointer; opacity: 0; /* hide this */ z-index: 2; /* and place it over the hamburger */ -webkit-touch-callout: none; } /* * Just a quick hamburger */ #menuToggle span { display: block; width: 27px; height: 3px; margin-bottom: 4px; position: relative; margin-top:4px; background: var(--font-color); border-radius: 3px; z-index: 1; transform-origin: 4px 0px; transition: transform 0.5s cubic-bezier(0.77,0.2,0.05,1.0), background 0.5s cubic-bezier(0.77,0.2,0.05,1.0), opacity 0.55s ease; } #menuToggle span:first-child { transform-origin: 0% 0%; } #menuToggle span:nth-last-child(2) { transform-origin: 0% 100%; } /* * Transform all the slices of hamburger * into a crossmark. */ #menuToggle input:checked ~ span { opacity: 1; transform: rotate(45deg) translate(-2px, -1px); background: var(--link-hover-color); } /* * But let's hide the middle one. */ #menuToggle input:checked ~ span:nth-last-child(3) { opacity: 0; transform: rotate(0deg) scale(0.2, 0.2); } /* * Ohyeah and the last one should go the other direction */ #menuToggle input:checked ~ span:nth-last-child(2) { transform: rotate(-45deg) translate(0, -1px); } /* * Make this absolute positioned * at the top left of the screen */ #menu { position: absolute; left:-10px; width: 200px; /*fit-content;*/ padding: 10px; margin-top:10px; /*display:none;*/ background: var(--light-background-color); color:var(--font-color); list-style-type: none; -webkit-font-smoothing: antialiased; max-height: calc(80vh); overflow:auto; overscroll-behavior: contain; border-radius: 5px; /* to stop flickering of text in safari */ } /* * And let's slide it in from the left */ #menuToggle input:checked ~ ul { display:block; } .hidden { display: none; }</style><div role="navigation" id="hamburger"><div id="menuToggle"> <input type="checkbox" /> <span></span> <span></span> <span></span><ul id="menu" class="hidden"><li class="menu_section">Main<li><a href="/home/feed" ><i class="ph ph-house"></i> Home Feed</a><li><a href="/about" ><i class="ph ph-identification-card"></i> About</a><li><a href="/feeds" ><i class="ph ph-rss"></i> Feeds</a><li><a href="/activity" ><i class="ph ph-pulse"></i> Activity</a><li><a href="https://shellsharks.social/@shellsharks" target="_blank"><i class="ph ph-mastodon-logo"></i> Mastodon</a><li><a href="mailto:mike@shellsharks.com" ><i class="ph ph-envelope"></i> Email</a><li><a href="https://ko-fi.com/shellsharks" ><i class="ph ph-coffee"></i> Buy me a Coffee</a><li id="themetoggler"><i class="ph ph-swatches" id="themetoggle"></i> Toggle theme<li class="menu_section">Site Nav<li><a href="/scrolls" ><i class="ph ph-scroll"></i> Scrolls Newsletter</a><li><a href="/podcast" ><i class="ph ph-microphone"></i> The Shellsharks Podcast</a><li><a href="/notebook" ><i class="ph ph-note"></i> Notebook</a><li><a href="/blogs" ><i class="ph ph-article"></i> Blogs</a><li><a href="/blogs/infosec" ><i class="ph ph-bug"></i> Infosec Blogs</a><li><a href="/captains-log" ><i class="ph-fill ph-notebook"></i> Captain's Log</a><li><a href="/devlog" ><i class="ph ph-code-block"></i> Devlog</a><li><a href="/linklog" ><i class="ph ph-link"></i> Linklog</a><li><a href="/blogroll" ><i class="ph ph-paint-roller"></i> Blogroll</a><li><a href="/fediverse" ><i class="ph ph-fediverse-logo"></i> Fediverse ‚ÅÇ</a><li><a href="/slashes" ><i class="ph ph-folder-simple-star"></i> Slashes</a><li><a href="/uses" ><i class="ph ph-hammer"></i> Uses</a><li><a href="/now" ><i class="ph ph-clock"></i> Now</a><li><a href="/tags" ><i class="ph ph-tag"></i> Tags</a><li><a href="/statboard" ><i class="ph ph-gauge"></i> Statboard</a><li><a href="/changelog" ><i class="ph ph-arrows-left-right"></i> Change Log</a><li><a href="/interests" ><i class="ph ph-heart"></i> Interests</a><li><a href="/ideas" ><i class="ph ph-lightbulb-filament"></i> Ideas</a><li><a href="/bookmarks" ><i class="ph ph-bookmarks"></i> Bookmarks</a><li><a href="/resume" ><i class="ph ph-read-cv-logo"></i> Resume</a><li><a href="/pro" ><i class="ph ph-seal"></i> Shellsharks Pro</a><li><a href="/sharkweek" ><i class="ph ph-calendar-heart"></i> >Shark Week</a><li><a href="/architecture" ><i class="ph ph-blueprint"></i> Architecture</a><li><a href="/roadmap" ><i class="ph ph-road-horizon"></i> Roadmap</a><li><a href="/tags?tag=bestof#info" ><i class="ph ph-star"></i> Best</a><li><a href="/projects" ><i class="ph ph-compass-tool"></i> Projects</a><li><a href="/now#supporting" ><i class="ph ph-hand-heart"></i> Supports</a><li><a href="/uses#referrals" ><i class="ph ph-hand-arrow-up"></i> Referrals</a><li><a href="/style" ><i class="ph ph-frame-corners"></i> Style</a><li><a href="/.well-known/security.txt" ><i class="ph ph-bug"></i> Report a Bug</a><li><a href="/humans.txt" ><i class="ph ph-user-rectangle"></i> Humans</a><li><a href="/disclaimer" ><i class="ph ph-info"></i> License & Disclaimer</a><li><a href="/privacy" ><i class="ph ph-cookie"></i> Privacy</a><li><a href="/starsharks" ><i class="ph ph-sparkle"></i> Starsharks</a><li><a href="/chipotle" ><i class="ph ph-pepper"></i> Chipotle</a><li><a href="/misc" ><i class="ph ph-paperclip"></i> Junk Drawer</a><li><a href="/ocean" ><i class="ph ph-waves"></i> the Ocean</a><li><a href="/void" ><i class="ph ph-spiral"></i> the Void</a><li class="menu_section">Other<li><a href="/public.pgp" ><i class="ph ph-key"></i> PGP Public Key</a><li><a href="https://infosec.pub/c/cybersecurity" target="_blank"><i class="ph ph-hamburger"></i> Infosec.Pub</a><li><a href="https://malici.ous.computer/@shellsharks" target="_blank"><i class="ph ph-linux-logo"></i> malici.ous.computer</a><li><a href="https://mastodon.social/@sass" target="_blank"><i class="ph-fill ph-mastodon-logo"></i> Mastodon.Social</a><li><a href="https://discord.gg/3rkHgtcYbb" target="_blank"><i class="ph ph-discord-logo"></i> Shellsharks Discord</a><li><a href="https://www.linkedin.com/in/mikesass" target="_blank"><i class="ph ph-linkedin-logo"></i> Linkedin</a><li><a href="/toots/infosec-exchange/shellsharks/" ><i class="ph ph-database"></i> Infosec.exchange Toot Archive</a><li><a href="https://github.com/shellsharks" target="_blank"><i class="ph ph-github-logo"></i> Github</a><li><a href="https://fediverse-webring-enthusiasts.glitch.me/profiles/shellsharks_infosec.exchange/index.html" target="_blank"><i class="ph ph-circle"></i> Webring Enthusiasts</a><li><a href="https://fedia.io/m/cybersecurity" target="_blank"><i class="ph ph-square-half"></i> Fedia.io</a><li><img src="/assets/img/avatar.png" height="50" style="position: relative; display: block; margin:auto; margin-top:20px; margin-bottom:20px;" /></ul></div></div><!-- window.onload = function() { var menuButton = document.getElementById('menuToggle'); var menu = document.getElementById('menu'); menu.classList.add('hidden'); document.getElementById("menuToggle").children[0].checked = false; } --> <script> const menuButton = document.getElementById('menuToggle'); const menu = document.getElementById('menu'); var links = menu.querySelectorAll('a'); menuButton.addEventListener('click', () => { if (!menu.contains(event.target)) { menu.classList.toggle('hidden'); } }); document.addEventListener('click', (event) => { if (!menu.contains(event.target) && !menuButton.contains(event.target)) { menu.classList.add('hidden'); if (document.getElementById("menuToggle").children[0].checked) { document.getElementById("menuToggle").children[0].checked = !document.getElementById("menuToggle").children[0].checked; } } }); links.forEach(function(link) { link.addEventListener('click', function(event) { document.querySelector("#hamburger").click(); }); }); </script> <img id="title_image" src="/assets/img/shellsharks.gif" alt="Shellsharks>_" onclick='window.open("/","_self")'> <span style="float:right;"><a href="/search"><i class="ph-bold ph-magnifying-glass" style="color:var(--font-color); font-size:1.6em; top:-2px;"></i></a></span> </heading><nav class="container_item"><ul id="nav_menu" style="list-style-type:none;padding-left: 10px;"><li class="menu_section">Main<li><a href="/home/feed" ><i class="ph ph-house"></i> Home Feed</a><li><a href="/about" ><i class="ph ph-identification-card"></i> About</a><li><a href="/feeds" ><i class="ph ph-rss"></i> Feeds</a><li><a href="/activity" ><i class="ph ph-pulse"></i> Activity</a><li><a href="https://shellsharks.social/@shellsharks" target="_blank"><i class="ph ph-mastodon-logo"></i> Mastodon</a><li><a href="mailto:mike@shellsharks.com" ><i class="ph ph-envelope"></i> Email</a><li><a href="https://ko-fi.com/shellsharks" ><i class="ph ph-coffee"></i> Buy me a Coffee</a><li id="themetoggler"><i class="ph ph-swatches" id="themetoggle"></i> Toggle theme<li class="menu_section">Site Nav<li><a href="/scrolls" ><i class="ph ph-scroll"></i> Scrolls Newsletter</a><li><a href="/podcast" ><i class="ph ph-microphone"></i> The Shellsharks Podcast</a><li><a href="/notebook" ><i class="ph ph-note"></i> Notebook</a><li><a href="/blogs" ><i class="ph ph-article"></i> Blogs</a><li><a href="/blogs/infosec" ><i class="ph ph-bug"></i> Infosec Blogs</a><li><a href="/captains-log" ><i class="ph-fill ph-notebook"></i> Captain's Log</a><li><a href="/devlog" ><i class="ph ph-code-block"></i> Devlog</a><li><a href="/linklog" ><i class="ph ph-link"></i> Linklog</a><li><a href="/blogroll" ><i class="ph ph-paint-roller"></i> Blogroll</a><li><a href="/fediverse" ><i class="ph ph-fediverse-logo"></i> Fediverse ‚ÅÇ</a><li><a href="/slashes" ><i class="ph ph-folder-simple-star"></i> Slashes</a><li><a href="/uses" ><i class="ph ph-hammer"></i> Uses</a><li><a href="/now" ><i class="ph ph-clock"></i> Now</a><li><a href="/tags" ><i class="ph ph-tag"></i> Tags</a><li><a href="/statboard" ><i class="ph ph-gauge"></i> Statboard</a><li><a href="/changelog" ><i class="ph ph-arrows-left-right"></i> Change Log</a><li><a href="/interests" ><i class="ph ph-heart"></i> Interests</a><li><a href="/ideas" ><i class="ph ph-lightbulb-filament"></i> Ideas</a><li><a href="/bookmarks" ><i class="ph ph-bookmarks"></i> Bookmarks</a><li><a href="/resume" ><i class="ph ph-read-cv-logo"></i> Resume</a><li><a href="/pro" ><i class="ph ph-seal"></i> Shellsharks Pro</a><li><a href="/sharkweek" ><i class="ph ph-calendar-heart"></i> >Shark Week</a><li><a href="/architecture" ><i class="ph ph-blueprint"></i> Architecture</a><li><a href="/roadmap" ><i class="ph ph-road-horizon"></i> Roadmap</a><li><a href="/tags?tag=bestof#info" ><i class="ph ph-star"></i> Best</a><li><a href="/projects" ><i class="ph ph-compass-tool"></i> Projects</a><li><a href="/now#supporting" ><i class="ph ph-hand-heart"></i> Supports</a><li><a href="/uses#referrals" ><i class="ph ph-hand-arrow-up"></i> Referrals</a><li><a href="/style" ><i class="ph ph-frame-corners"></i> Style</a><li><a href="/.well-known/security.txt" ><i class="ph ph-bug"></i> Report a Bug</a><li><a href="/humans.txt" ><i class="ph ph-user-rectangle"></i> Humans</a><li><a href="/disclaimer" ><i class="ph ph-info"></i> License & Disclaimer</a><li><a href="/privacy" ><i class="ph ph-cookie"></i> Privacy</a><li><a href="/starsharks" ><i class="ph ph-sparkle"></i> Starsharks</a><li><a href="/chipotle" ><i class="ph ph-pepper"></i> Chipotle</a><li><a href="/misc" ><i class="ph ph-paperclip"></i> Junk Drawer</a><li><a href="/ocean" ><i class="ph ph-waves"></i> the Ocean</a><li><a href="/void" ><i class="ph ph-spiral"></i> the Void</a><li class="menu_section">Other<li><a href="/public.pgp" ><i class="ph ph-key"></i> PGP Public Key</a><li><a href="https://infosec.pub/c/cybersecurity" target="_blank"><i class="ph ph-hamburger"></i> Infosec.Pub</a><li><a href="https://malici.ous.computer/@shellsharks" target="_blank"><i class="ph ph-linux-logo"></i> malici.ous.computer</a><li><a href="https://mastodon.social/@sass" target="_blank"><i class="ph-fill ph-mastodon-logo"></i> Mastodon.Social</a><li><a href="https://discord.gg/3rkHgtcYbb" target="_blank"><i class="ph ph-discord-logo"></i> Shellsharks Discord</a><li><a href="https://www.linkedin.com/in/mikesass" target="_blank"><i class="ph ph-linkedin-logo"></i> Linkedin</a><li><a href="/toots/infosec-exchange/shellsharks/" ><i class="ph ph-database"></i> Infosec.exchange Toot Archive</a><li><a href="https://github.com/shellsharks" target="_blank"><i class="ph ph-github-logo"></i> Github</a><li><a href="https://fediverse-webring-enthusiasts.glitch.me/profiles/shellsharks_infosec.exchange/index.html" target="_blank"><i class="ph ph-circle"></i> Webring Enthusiasts</a><li><a href="https://fedia.io/m/cybersecurity" target="_blank"><i class="ph ph-square-half"></i> Fedia.io</a></ul></nav><main class="container_item"><div class="pageheader"></div><article class="post h-entry"><header class="post-header"><h1 class="post-title p-name" id="title" style="display:inline;">Mastodon Auto-PESOS</h1><span style="color:#CA3342;font-size:4em;line-height: 20px;">.</span></header><!--<div id="postinfo"> <span class="time"><i class="ph ph-note-pencil"></i> by <span class="hov p-author h-card">Mike Sass</span> <a href="/about" rel="author"><img class="u-photo" src="https://shellsharks-images.s3.amazonaws.com/surfshark.png" style="display:inline; height:1em;" /></a></span><br/> <br/> <span class="categories"> &raquo; </span></div>--><div class="post-content e-content" style="margin-top: 30px;"><p>As someone who has fully embraced the <a href="/indieweb">IndieWeb</a>, <a href="/notes/2025/01/16/the-magic-of-pesos">owning my data</a> and maintaining a canonical <em><a href="/notes/2023/08/16/your-website-your-identity">identity</a></em> on the web is very important. Though I operate a lot of my online life directly out of my website, it doesn‚Äôt mean I don‚Äôt participate in other social networks. What I don‚Äôt want is for my ‚Äòcontent‚Äô to live solely within any external platform, silo or walled garden. Finding a way to <a href="/notes/2025/02/05/save-your-links">archive</a> or otherwise make this content available on my own site mitigates this. <strong><a href="https://indieweb.org/PESOS">PESOS</a></strong> (i.e. ‚ÄúPublish Elsewhere Syndicate (to your) Own Site‚Äù) or what I like to call ‚Äú<a href="/notes/2024/04/02/reverse-syndication-pesos">reverse syndication</a>‚Äù is the practice of archiving content that is originally posted elsewhere on the web, back to your site - the single source of origin. The problem is, if a lot of your content <em>originates</em> outside your site, you have to either deal with the overhead of manually archiving it, <em>or</em>, find a way to automatically do it. Here, I talk about how I (<em>finally</em>) found a way to <em>semi</em>-auto-PESOS select <a href="https://shellsharks.social/@shellsharks">Mastodon</a> posts to the site.<p>Traditionally, my <a href="https://shellsharks.com/syndication-strategy">syndication strategy</a> has been very curated, and <em>very</em> <strong>manual</strong>. It‚Äôs time consuming to archive stuff I post elsewhere, and that overhead scales rapidly if I am generating a lot that originates not on my own site. It requires that I, A. <a href="/notes/2025/01/28/remembering-to-pesos">remember</a> to archive it at all, and B. that I make nuanced decisions about whether something is <em>worth</em> archiving to begin with. That threshold for whether something is worth it or not can vary depending on how lazy I am being, to be frank. If there was a way for me to automatically pull down posts, add the appropriate <a href="#front-matter">front-matter</a> and use some logic to determine which posts I would actually <a href="#what-to-archive">want to bring back</a> to my site, that would save me a lot of time! Not only that, but there would be things that could make it to my site that I traditionally wouldn‚Äôt have bothered to try and manually bring over. <em>Awesome!</em><p>Setting PESOS and data ownership aside for a second though, a big <a href="/notes/2024/04/08/the-activity-feed">motivator</a> for me wanting to pull in content from around the Internet was <a href="https://www.mollywhite.net/feed">Molly White‚Äôs Activity feed</a>. I loved the idea of just having that composite feed of everything I was up to all in one <a href="/creating-an-activity-feed">mega timeline</a>. Bringing in Mastodon posts as I explain in this devlog is one piece to that ultimate indieweb-puzzle.<hr class="fin" /><h1 id="mastodon-markdown-archive">Mastodon markdown archive</h1><p>I‚Äôve had this dream of automating the <a href="/notes/2024/04/02/reverse-syndication-pesos">reverse-syndication</a> of my <a href="https://shellsharks.com/syndication-strategy">Mastodon</a> posts since April(<em>ish</em>) of 2024, and had searched for ways to pull in this content off and on since then. Recently though, I came across this post, ‚Äú<u><a href="https://garrido.io/notes/archiving-and-syndicating-mastodon-posts/">Archiving and syndicating Mastodon posts</a></u>‚Äù, which seemed to exactly meet my needs. <sup id="fnref:1"><a href="#fn:1" class="footnote" rel="footnote" role="doc-noteref">1</a></sup> So, I cloned down the <a href="https://git.garrido.io/gabriel/mastodon-markdown-archive">repo</a> and tried it out! <sup id="fnref:2"><a href="#fn:2" class="footnote" rel="footnote" role="doc-noteref">2</a></sup><p><em>It didn‚Äôt go well</em>.<p>I was getting an incomprehensible traceback and wasn‚Äôt sure how to troubleshoot. I thought, maybe it could be the version? So I tried a downgraded version and still no dice. Finally, I went back and actually re-read <a href="https://garrido.io/notes/archiving-and-syndicating-mastodon-posts/">the original post</a> and tried to follow slowly, step-by-step, and sure enough, it was something pretty simple that was the issue (<em>isn‚Äôt it always?</em>). <a href="https://garrido.io/about/">Gabriel</a> makes it pretty clear that the <code class="language-plaintext highlighter-rouge">dist</code> and <code class="language-plaintext highlighter-rouge">user</code> flags are <u>required</u>, and sure enough, <em>they super are</em>. I won‚Äôt dock any points from Gabriel for not handling those errors gracefully, after all, this is freely available and otherwise the script works great!<h2 id="planning-and-mechanics">Planning and Mechanics</h2><p><em>OK</em>, so I‚Äôve proved that I can get <a href="https://git.garrido.io/gabriel/mastodon-markdown-archive">the script</a> to work, now I needed to figure a few things out‚Ä¶<ul><li><a href="#what-to-archive"><i class="ph ph-link-simple-horizontal"></i></a> What posts did I want to pull in? (e.g. boosts, replies, public-only, etc‚Ä¶)<li><a href="#notes"><i class="ph ph-link-simple-horizontal"></i></a> Where do I want these posts to live on my site?<li><a href="#front-matter"><i class="ph ph-link-simple-horizontal"></i></a> What front matter is important to populate for these posts? What data is available in the .json output for each post?<li><a href="#site-tweaks"><i class="ph ph-link-simple-horizontal"></i></a> Do I need to tweak any of my existing code to accomodate the posts pulled in via this script?</ul><h3 id="what-to-archive">What to Archive?</h3><p>The first challenge was part technical and part <em>philosophical</em>. <b>What do I <i>really</i> want to archive</b>? To start, I knew I didn‚Äôt care to archive my boosts/reblogs, so I can easily tune those out with the <code class="language-plaintext highlighter-rouge">--exclude-reblogs</code> flag. What about replies? Well I write a lot of (<em>in my mind</em>) great, well-thought-out replies, with info I‚Äôd love to hold on to and refer back to later. In fact, I‚Äôve manually reverse-syndicated <em>a lot</em> of this kind of post in the past. So I knew I needed replies, just not <em>all</em> of them. The overwhelming majority of my reply posts are short little comments that when I thought about it, weren‚Äôt really anything I cared to bring back to my site. Especially in a <a href="#notes">format</a> that is <a href="/devlog/site-search">site-searchable</a> and would certainly junk up other parts of the site (e.g. <a href="/tags">tags</a> page, <a href="/search">search</a> results, RSS <a href="/feeds">feeds</a>, etc‚Ä¶)<p>I knew I would need to clean up any mass-export of posts that included replies, so to start I just <a href="https://garrido.io/notes/archiving-and-syndicating-mastodon-posts/#creating-the-archive">created the full archive</a> to see how many posts there were in total. The result was over 1000 and it became clear that I <u>wasn't</u> going to manually review each of those to see what was worth keeping. <em>I needed a new approach</em>. So, I decided to instead bring down just posts that I had marked <strong>public</strong>. More recently, when I post on Mastodon I‚Äôve given more thought to whether that post should be marked as ‚Äò<a href="https://docs.joinmastodon.org/user/posting/#public">public</a>‚Äô or ‚Äò<a href="https://docs.joinmastodon.org/user/posting/#unlisted">quiet public</a>‚Äô (i.e. ‚Äòunlisted‚Äô). This foresight would pay off now as I wanted to only bring over a select few things that I felt were worthy of being public/exposed on my site. The problem is, I haven‚Äôt <em>always</em> been this mindful about what visibilty setting I post under. <em>But it would have to do for now</em>. So, how many posts did I have that were in fact <em>public</em>? Creating the filtered archive yielded only a few hundred posts - <em>much more manageable</em> to manually review. The compromise now was that <em>maybe</em> I‚Äôd miss a good reply that I had marked as <em>unlisted</em> some time ago, but I‚Äôve done a decent enough job manually syndicating things I thought were worth keeping for a good while now so I‚Äôm <em>OK</em> if maybe I missed something.<p>Below are the flags I used to create my complete post archive of public toots (included replies).<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
go run main.go <span class="se">\</span>
<span class="nt">--user</span><span class="o">=</span>https://shellsharks.social/@shellsharks <span class="se">\</span>
<span class="nt">--dist</span><span class="o">=</span>./[OUTPUT FOLDER] <span class="se">\</span>
<span class="nt">--exclude-reblogs</span> <span class="se">\</span>
<span class="nt">--filename</span><span class="o">=</span><span class="s1">'{{.Post.CreatedAt | date "2006-01-02"}}-shellsharks.social-{{.Post.Id}}.md'</span> <span class="se">\</span>
<span class="nt">--porcelain</span> <span class="se">\</span>
<span class="nt">--persist-last</span><span class="o">=</span>./last <span class="se">\</span>
<span class="nt">--max-id</span><span class="o">=</span><span class="si">$(</span><span class="nb">test</span> <span class="nt">-f</span> ./last <span class="o">&amp;&amp;</span> <span class="nb">cat</span> ./last <span class="o">||</span> <span class="nb">echo</span> <span class="s2">""</span><span class="si">)</span> <span class="se">\</span>
<span class="nt">--visibility</span><span class="o">=</span>public

</code></pre></div></div><p>After clicking through each of the exported posts, I whittled the list down from 200-<em>ish</em> to about <em>50</em> posts. <em>Not bad</em>! Though it makes you wonder how important/worth it all of this effort is if I‚Äôm only interested in saving 50 things from nearly a year‚Äôs worth of tootin‚Äô. But, this last year I have also done a lot of manual reverse-syndicating which softened how many I needed to import now. ü§∑‚Äç‚ôÇÔ∏è<p>Moving forward, I‚Äôll have to be thoughtful about what I mark as <em>unlisted</em> vs. what I mark as <em>public</em>. Anything <em>public</em> <u>will</u> come to my site.<p>This is what my command looks like to import just the <u>latest</u> <em>public</em> posts‚Ä¶<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
go run main.go <span class="se">\</span>
<span class="nt">--user</span><span class="o">=</span>https://shellsharks.social/@shellsharks <span class="se">\</span>
<span class="nt">--dist</span><span class="o">=</span>/[DESTINATION DIR] <span class="se">\</span>
<span class="nt">--exclude-reblogs</span> <span class="se">\</span>
<span class="nt">--filename</span><span class="o">=</span><span class="s1">'{{.Post.CreatedAt | date "2006-01-02"}}-shellsharks.social-{{.Post.Id}}.md'</span> <span class="se">\</span>
<span class="nt">--porcelain</span> <span class="nt">--persist-first</span><span class="o">=</span>./first <span class="nt">--since-id</span><span class="o">=</span><span class="si">$(</span><span class="nb">test</span> <span class="nt">-f</span> ./first <span class="o">&amp;&amp;</span> <span class="nb">cat</span> ./first <span class="o">||</span> <span class="nb">echo</span> <span class="s2">""</span><span class="si">)</span> <span class="se">\</span>
<span class="nt">--visibility</span><span class="o">=</span>public

</code></pre></div></div><h3 id="notes">Notes</h3><p>The second question was, <em>where</em> should these auto-syndicated posts live? In the original plan for my site, the <a href="/notebook">Notes</a> section was meant to house microblogs / social media posts, but I wasn‚Äôt sure I <em>really</em> wanted these auto-syndicated toots to <em>junk</em> up that timeline. In practice, the way I‚Äôve used the notes feed has been for content I thought was ‚Äúlower quality‚Äù than what was in my posts feed (e.g. shorter-form, less-researched, etc‚Ä¶). In hindsight, this was the <u>wrong</u> way to think about the notes feed. Over time, this approach resulted in me publishing a lot of things as Notes that should have just been <em>Posts</em> all along. This meant that my Notes feed had become HIGHER quality than I had intended it to be. So, rather than create yet <em>another</em> feed for these toots, I decided to revert back to the original, correct mode of thinking and house these toots as Notes on my site. Moving forward I plan to be less stingy about what I publish as a ‚ÄòPost‚Äô and much less <a href="/notes/2025/01/29/publish-with-pride">precious</a> about what gets ‚ÄòNote‚Äô status. If there was anything ‚Äòlower quality‚Äô than that, it probably doesn‚Äôt need to exist on my site.<p>It‚Äôs also worth mentioning that my notes <em>layout</em> was built with a social media post design in mind from the beginning. So, it definitely made sense in the end to just bring these toots in as notes and have them live directly within my <a href="/notebook">notebook</a> feed.<div style="max-width:650px; margin: auto; font-size:.85em;"><article class="post h-entry"><div id="ncard" class="containbox" style="margin:auto; position:relative; margin-top: 20px; margin-bottom:20px; width:100%; background-color: color-mix(in srgb, var(--mastodon-color) 10%, var(--background-color));"><div style="float:left;"><a href="https://shellsharks.social/@shellsharks" class="p-author"><img class="profilepic" src="https://shellsharks-images.s3.amazonaws.com/surfshark.png" width="60" alt="author-image" /></a></div><div style="float:left;"><span id="author" style="font-weight:bold;">shellsharks</span><br /><span id="handle" style="color:var(--light-font-color);">@shellsharks</span></div><div style="float:right;padding:10px 0px 0px 0px;"><i class="ph ph-calendar-dot"></i> <span id="date" style="font-size:0.75em;" class="dt-published">3/22/24 23:31</span></div><br /><br /><br /><div class="post-content e-content"><p>Alright fedi‚Äô, spit a ‚Äòverse, drop some knowledge.</div><div style="bottom:-5px; text-align:right;font-size:0.75em;"><i class="ph ph-pencil"></i> 8</div><hr style="opacity:35%;margin-top: 10px;margin-bottom: 10px;width:75%;" /><div id="info" class="wrapper"><div class="box 1" style="background-color:color-mix(in srgb, var(--mastodon-color) 10%, var(--background-color));"><div><i class="ph ph-map-pin-area" title="Posted from"></i> <span id="posted-from" style="font-size:0.75em;">Ivory for iOS</span></div><div><i class="ph ph-broadcast"></i><span style="font-size:0.75em;"> Syndication:</span></div><div style="font-size:1.5em;"><span id="syndicate-to"> <span style="padding:0px 3px 0px 3px;"><a href="https://shellsharks.social/users/shellsharks/statuses/112142889817441762"><i class="ph ph-mastodon-logo" title="Mastodon"></i></a></span> </span></div></div><div class="box2" style="bottom:0;"><div style="text-align:right; padding:5px 5px 5px 5px;"><a class="u-url" href="/notes/2024/03/22/spit-a-verse-drop-some-knowledge"><i class="ph ph-link" title="Permalink"></i></a> <a href="/notebook"><i class="ph ph-book-open" title="Notebook"></i></a> <a href="/"><i class="ph ph-house" title="Home"></i></a></div></div></div></div></article></div><style> .wrapper { display: grid; grid-template-columns: 1fr 1fr; } img {max-width:100%}</style><p>This said, they were‚Äônt given <em>full</em> rights and visibility across the blog (<em>at least not for now</em>), as I‚Äôll explain <a href="#site-tweaks">later</a>‚Ä¶<h3 id="front-matter">Front Matter</h3><p><a href="/notebook">Notes</a> on my site have their own unique layout and some specific front matter metadata. To make this whole effort worth it, I needed <a href="https://git.garrido.io/gabriel/mastodon-markdown-archive">the script</a> to auto-populate as much of that metadata as possible. Thankfully, <a href="https://garrido.io/about/">Gabriel</a> solutioned for this‚Ä¶<p>This script supports a <a href="https://git.garrido.io/gabriel/mastodon-markdown-archive">templating construct</a> (located here <code class="language-plaintext highlighter-rouge">/mastodon-markdown-archive/files/templates</code>) which allows you to customize front matter. It will convert hashtags to jekyll tags, populate created dates, author names, etc‚Ä¶ <a href="https://pkg.go.dev/git.garrido.io/gabriel/mastodon-markdown-archive/client">This resource</a> shows you some of the variables/data types you can work with from the .json export. Notably, I used the ‚Äú<a href="https://pkg.go.dev/git.garrido.io/gabriel/mastodon-markdown-archive/client#Account">Account</a>‚Äù and ‚Äú<a href="https://pkg.go.dev/git.garrido.io/gabriel/mastodon-markdown-archive/client#Post">Post</a>‚Äù types to further enrich my post front matter. Below I show some of the more relevant tweaks to the default <code class="language-plaintext highlighter-rouge">post.tmpl</code> file‚Ä¶<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
layout: note
title: shellsharks.social {{.Post.CreatedAt | date "1/2/06 15:04 MST"}}
author: {{ .Post.Account.DisplayName }}
syndication: auto
syndicate-to:
- name: Mastodon
  url: {{ .Post.URI }}
  icon: ph ph-mastodon-logo
{{- if .Post.Application}}
posted-from: {{ .Post.Application.Name }}
{{- end}}

</code></pre></div></div><p>Customizing the date structure is super easy thanks to <a href="https://docs.gomplate.ca/functions/time/">gomplate</a>, and it‚Äôs nice that I can import the ‚ÄòApplication‚Äô used to publish the post and have that represented in my notes front matter metadata.<h3 id="site-tweaks">Site Tweaks</h3><p>To make this all work correctly I had to tweak a <em>few things</em> in my existing layouts and consider how this type of content would be fed into the various streams and feeds across the site.<p><em>First</em>, I excluded anything auto-syndicated from going into my <a href="/feeds">RSS feeds</a>. If you want to follow me on social media, you can do that, you can even subscribe to those RSS feeds directly. But I figured folks who subscribed to my blogs RSS didn‚Äôt need to have my exact social media posts fed into their RSS readers as well.<p><em>Second</em>, a lot of these <a href="/notes/2024/04/02/reverse-syndication-pesos">PESOS‚Äôed</a> toots do not have any hashtags, and thus do not come over with any tag front-matter. So I had to add a bit of logic on my <a href="/tags">tags</a> page to make sure tagless posts didn‚Äôt show up in the list.<p><em>Third</em>, I added some additional logic to my activity streams on my home page to not show auto-syndicated toots. They <em>will</em> show up in my ‚Äú<a href="/#infosecstuff">Infosec-Only</a>‚Äù stream and in the ‚Äú<a href="/#latest-note">Latest Note</a>‚Äù card however.<p>For all of this logic to work however, I added a flag in the <a href="#front-matter">front matter</a> for these notes - <code class="language-plaintext highlighter-rouge">syndication: auto</code>. If I want to have these notes show up in my feeds/streams later, I can easily remove that flag and regenerate the site.<p>Overall though, my site handled the addition of these notes pretty well - with minimal re-engineering üòÑ.<h2 id="issues-and-the-future">Issues and the Future</h2><p>I‚Äôm happy with the <em>v1</em> of this capability, I think it will save me a lot of time and bring in content I never had the time to import/archive in the past. <em>But</em>, it isn‚Äôt without <em>some</em> issues, and there‚Äôs a lot I‚Äôd like to improve on into the future.<ul><li><p>Notes are brought in with no title, and reply posts are brought in without the OP context. I <em>might</em> take time to retroactively go back and add this information in. Since I‚Äôm being pretty <a href="#what-to-archive">selective</a> about what gets brought over, this shouldn‚Äôt be that big of a task.<li><p>This script solves for my <a href="https://shellsharks.social/@shellsharks">Mastodon</a> posts, but there‚Äôs a lot of other places I‚Äôd like to PESOS in a similar way (e.g. GoToSocial, Pixelfed, Bluesky, Reddit, Lemmy, etc‚Ä¶). Notably, this script does <em>not</em> work for GoToSocial <em>or</em> Pixelfed, so I‚Äôll either need to tweak it myself, find a new solution, or whip up some script of my own to do it. Until then, I will continue to <a href="/syndication-strategy">manually reverse-syndicate</a> things I think are worth it.<li><p>For now, I am running this script manually, rather than having it auto-run as a GitHub <a href="https://garrido.io/notes/archiving-and-syndicating-mastodon-posts/#updating-the-archive">action</a> or cronjob on my local machine. In the future, I may want to automate it fully. If I do that, I‚Äôd like to find a way to <a href="https://garrido.io/notes/archiving-and-syndicating-mastodon-posts/#integrating-with-the-site">auto update</a> my <a href="/changelog">changelog</a> as well to reflect new imported notes.<li><p>Finally, I‚Äôve considered making a separate feed that truly mirrors my Fediverse feed, importing all posts. This feed would be entirely isolated from my <a href="/">home page</a> streams, <a href="/search">search</a>, <a href="/tags">tags</a>, <a href="/feeds">RSS feeds</a>, etc‚Ä¶ It would literally just be a mirror of my <a href="https://shellsharks.social/@shellsharks">Mastodon</a> toots. A project for another day‚Ä¶</ul><h1 id="resources">Resources</h1><div class="footnotes" role="doc-endnotes"><ol><li id="fn:1"><p><a href="https://garrido.io/notes/archiving-and-syndicating-mastodon-posts">Archiving and syndicating Mastodon posts</a>¬†<a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a><li id="fn:2"><p><a href="https://git.garrido.io/gabriel/mastodon-markdown-archive">mastodon-markdown-archive</a>¬†<a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></ol></div></div></article><hr class="fin"><div id="poststats" class="containbox" style="margin: auto;"> <span class="time"><i class="ph ph-calendar-dot"></i> Published: <span class="dt-published">March 11, 2025</span></span> <a class="u-url u-uid" href></a><br> <span class="categories"><i class="ph ph-tag"></i> Tags: <span class="primarybg" style="border-radius:15px;padding:0px 5px 0px 5px;"><a class="p-category" href="/tags?tag=devlog">#devlog</a></span> <span class="primarybg" style="border-radius:15px;padding:0px 5px 0px 5px;"><a class="p-category" href="/tags?tag=mastodon">#mastodon</a></span> <span class="primarybg" style="border-radius:15px;padding:0px 5px 0px 5px;"><a class="p-category" href="/tags?tag=fediverse">#fediverse</a></span> </span><br/> <span class="time"><i class="ph ph-pencil"></i> Word count: 2584</span> <span class="p-summary" style="display:none;">How I'm auto-reverse-syndicating Mastodon posts to my static site.</span><div style="color:var(--secondary-font-color);"> <i class="ph ph-broadcast"></i><span> Syndicated To:</span> <span style="padding:0px 3px 0px 3px;"><a href="https://shellsharks.social/@shellsharks/114144559008263622"><i class="ph ph-mastodon-logo" title="Mastodon" style="font-size:1.25em;"></i></a></span></div></div><br/><div class="PageNavigation"> <a class="prev" style="margin-right: 2em;" href="/devlog/site-search#title">&laquo; Site Search</a><div style="float:right;"><a class="next" href="/devlog/the-changelog#title" style="margin-right:0;">The Changelog &raquo;</a></div></div></main><aside class="container_item"></aside><footer class="container_item"> <center><span style="color:var(--light-font-color); font-size:.8em; font-style:italic; position:relative; top:25px;">Brought to you with <i class="ph-fill ph-heart-straight" style="color:var(--accent-color);"></i> by <a href="https://shellsharks.com/about">Shellsharks</a></span></center> <center> <img id="sharkfooter" src="/assets/img/sharks-circling.png" alt="Circling Sharks" style="width:150px;"></img> </center></footer></div><noscript><div class="panel" align="center" style="font-weight:bold;"><h1>Please enable JavaScript.</h1></div></noscript> <script src="/assets/js/themeswitcher.js"></script>
